import{_}from"./_plugin-vue_export-helper.1729849390362.js";import{o as m,e as $,w as s,b as n,_ as k,d as C,X as P,a as i,t as v,T,c as y,F as g,E as b,C as d,$ as j,r as x,S as h,Q as A,a0 as B,D as p}from"./index.1729849390362.js";import{_ as U,U as N}from"./UiParentCard.vue_vue_type_script_setup_true_lang.1729849390362.js";import{G as L,a as S}from"./authStore.1729849390362.js";const O={props:{account:String,charList:Array}},G=["onClick"];function w(r,t,e,a,c,u){return m(),$(T,{elevation:"10"},{default:s(()=>[n(k,null,{default:s(()=>t[0]||(t[0]=[C("Other characters")])),_:1}),n(P,{hover:!0,items:e.charList,"hide-default-header":"",class:"elevation-1"},{item:s(({item:l})=>[i("tr",{onClick:o=>{r.$router.push({name:"inspect-player",params:{accountname:e.account,charname:l.charname}})}},[i("td",null,v(l.charname),1)],8,G)]),_:1},8,["items"])]),_:1})}const z=_(O,[["render",w]]),D={props:{skills:Array}};function F(r,t,e,a,c,u){return m(),$(T,{elevation:"10",class:"mt-4"},{default:s(()=>[n(k,null,{default:s(()=>t[0]||(t[0]=[C("Player skills")])),_:1}),n(P,{hover:!0,items:e.skills,class:"elevation-1"},null,8,["items"])]),_:1})}const I=_(D,[["render",F]]),R={props:{stats:[]}};function H(r,t,e,a,c,u){return m(),$(T,{elevation:"10"},{default:s(()=>[n(k,null,{default:s(()=>t[0]||(t[0]=[C("Stats")])),_:1}),n(P,{hover:!0,items:e.stats},{default:s(()=>[t[1]||(t[1]=i("thead",null,[i("tr",null,[i("th",null,"Stat"),i("th",null,"Value")])],-1)),i("tbody",null,[(m(!0),y(g,null,b(e.stats,l=>(m(),y("tr",{key:l.stat},[i("td",null,v(l.stat),1),i("td",null,v(l.value),1)]))),128))])]),_:1},8,["items"])]),_:1})}const M=_(R,[["render",H]]),Q=(r,t)=>fetch(`${L()}/api/player/${r}/${t}/stats`,{method:"GET",headers:{Authorization:`Bearer ${S().getToken()}`,"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{let a=[];return e[0].v>=0&&(e=e.slice(1),e.forEach(u=>{const[[l,o]]=Object.entries(u);let f={stat:l,value:o};a.push(f)})),a}).catch(e=>(console.error("Error fetching players:",e),[])),X=r=>fetch(`${L()}/api/account/list/characters/${r}`,{method:"GET",headers:{Authorization:`Bearer ${S().getToken()}`,"Content-Type":"application/json"}}).then(t=>t.json()).then(t=>{let e=[];return t[0].v>=0&&(t=t.slice(1),t.forEach(c=>{const[[u,l]]=Object.entries(c);let o={charname:l};e.push(o)})),e}),q=(r,t)=>fetch(`${L()}/api/player/${r}/${t}/skills`,{method:"GET",headers:{Authorization:`Bearer ${S().getToken()}`,"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{let a=[];return e[0].v>=0&&(a=e.slice(1)),a}),J={components:{UiParentCard:U,UiPlayerAndAccountName:N,PlayerStatsCard:M,OtherCharacters:z,PlayerSkillTable:I},setup(){const r=B(),t=d(""),e=d(""),a=d([]),c=d([]),u=d([]),l=()=>{"accountname"in r.params?t.value=r.params.accountname:t.value="Error","charname"in r.params?e.value=r.params.charname:e.value="Error",t.value.length>0&&e.value.length>0&&(a.value=[],c.value=[],Q(t.value,e.value).then(o=>{a.value=o}),X(t.value).then(o=>{c.value=o}),q(t.value,e.value).then(o=>{u.value=o}))};return j(()=>r.params,()=>{l()}),x(()=>{l()}),{pageSetup:l,route:r,accountname:t,charname:e,stats:a,charList:c,skillList:u}}};function K(r,t,e,a,c,u){const l=p("UiParentCard"),o=p("UiPlayerAndAccountName"),f=p("OtherCharacters"),E=p("PlayerSkillTable"),V=p("PlayerStatsCard");return m(),y(g,null,[n(A,null,{default:s(()=>[n(h,{cols:"12"},{default:s(()=>[n(l,{title:"Player Inspection"})]),_:1})]),_:1}),n(A,null,{default:s(()=>[n(h,{cols:"12",md:"6"},{default:s(()=>[n(h,{cols:"12"},{default:s(()=>[n(o,{account:a.accountname,charname:a.charname},null,8,["account","charname"])]),_:1}),n(h,{cols:"12"},{default:s(()=>[n(f,{account:a.accountname,charList:a.charList},null,8,["account","charList"])]),_:1}),n(h,{cols:"12"},{default:s(()=>[n(E,{skills:a.skillList},null,8,["skills"])]),_:1})]),_:1}),n(h,{cols:"12",md:"6"},{default:s(()=>[n(h,{cols:"12"},{default:s(()=>[n(V,{stats:a.stats},null,8,["stats"])]),_:1})]),_:1})]),_:1})],64)}const te=_(J,[["render",K]]);export{te as default};
