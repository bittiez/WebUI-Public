import{G as i,a as s,d as c,b as a}from"./authStore.1729849390362.js";const u=async()=>fetch(`${i()}/api/discord/clientid`).then(e=>e.json()).then(e=>{var t,r;return((t=e[0])==null?void 0:t.v)>=0?{id:(r=e[1])==null?void 0:r.id,status:!0}:{id:"",status:!1}}).catch(e=>(console.error("Error fetching discord client id:",e),{id:"",status:!1})),f=async e=>fetch(`${i()}/api/discord/exchange/${e}`).then(t=>t.json()).then(t=>{var r,o;if(((r=t[0])==null?void 0:r.v)>=0&&t[1].status==!0){let n={token:(o=t[1])==null?void 0:o.token,status:!0};return s().updateToken(n.token),n}return{token:{},status:!1}}).catch(t=>(console.error("Error fetching discord client id:",t),{token:{},status:!1})),h=async()=>{if(s().isTokenEmpty())return new Promise(e=>e({status:!1,info:{}}));try{const t=await(await fetch("https://discord.com/api/users/@me",{method:"GET",headers:{Authorization:`Bearer ${s().token.access_token}`,"Content-Type":"application/json"}})).json(),r={status:!0,info:t};return c().updateJson(t),r}catch(e){return console.error("Error fetching discord profile info:",e),{status:!1,info:{}}}},l=()=>{a().code="",c().info={},s().token={}};export{f as E,h as G,l as P,u as R};
