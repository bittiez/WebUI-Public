import{I as g}from"./iconify.1729849390362.js";import{G as C,a as y}from"./authStore.1729849390362.js";import{O as x,m as c,p as n,r as P,D as v,o as u,e as h,w as s,b as t,P as b,a as i,v as k,u as l,t as D,Q as d,S as p,T as S}from"./index.1729849390362.js";const _=x("chart",{state:()=>({seriesData:[0]}),actions:{addPlayerCount(e){this.seriesData.push(e),this.seriesData.length>50&&this.seriesData.shift()},getLastCount(){return this.seriesData[this.seriesData.length-1]}}}),V=()=>fetch(`${C()}/api/stats/online`,{method:"GET",headers:{Authorization:`Bearer ${y().getToken()}`,"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{var r,a;if(((r=e[0])==null?void 0:r.v)>=0){let o=(a=e[1])==null?void 0:a.c;return _().addPlayerCount(o),o}return 0}).catch(e=>(console.error("Error fetching online stats:",e),0)),w={class:"d-flex ga-3 align-center"},O={class:"text-h6 heading"},T=c({__name:"OnlinePlayersGraph",setup(e){const r=n(()=>({chart:{type:"line",fontFamily:"inherit",foreColor:"#adb0bb",height:60,sparkline:{enabled:!0},group:"sparklines"},colors:["rgba(var(--v-theme-error))"],stroke:{curve:"smooth",width:2},markers:{size:0},tooltip:{theme:"dark",fixed:{enabled:!0,position:"right"},x:{show:!1}}})),a=_(),o=n(()=>a.getLastCount());return P(()=>{V()}),(f,B)=>{const m=v("apexchart");return u(),h(S,{elevation:"10"},{default:s(()=>[t(b,null,{default:s(()=>[i("div",w,[t(k,{size:"48",class:"rounded-md bg-lightsuccess"},{default:s(()=>[t(l(g),{icon:"solar:power-bold",class:"text-success",height:"25"})]),_:1}),i("h6",O,D(o.value)+" Online Players",1)]),t(d,{class:"mt-6"},{default:s(()=>[t(p,{cols:"12"},{default:s(()=>[t(m,{type:"line",height:"60",options:r.value,series:[{name:"Online Players",data:l(a).seriesData}]},null,8,["options","series"])]),_:1})]),_:1})]),_:1})]),_:1})}}}),I=c({__name:"index",setup(e){return(r,a)=>(u(),h(d,null,{default:s(()=>[t(p,{cols:"12",lg:"4"},{default:s(()=>[t(T)]),_:1})]),_:1}))}});export{I as default};
